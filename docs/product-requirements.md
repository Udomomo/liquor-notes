# プロダクト要求定義書

## 1. プロダクトの目的

「liquor-notes」は、自分が飲んだお酒を写真つきで記録・振り返りできる個人向けWebサービスである。
お酒の体験を手軽に残し、過去の記録を検索・閲覧できることで、自分だけのお酒ライブラリを構築する。

## 2. ターゲットユーザーと課題・ニーズ

### ターゲットユーザー
- サービス運営者本人（1名のみ）
- お酒を日常的に楽しみ、飲んだお酒の記録を残したい人

### 課題
- 飲んだお酒の名前や味の印象を忘れてしまう
- 写真はスマホに残るが、感想や評価と紐づけて管理できない
- 過去に飲んだお酒を振り返りたいとき、情報が散在している

### ニーズ
- スマホから手軽に写真つきで記録したい
- 評価で過去の記録を探したい
- シンプルで素早く記録できるUIがほしい

## 3. 主要な機能一覧

| # | 機能名 | 概要 |
|---|--------|------|
| F-01 | ログイン | メールアドレスとパスワードによる認証 |
| F-02 | ログアウト | セッションの終了 |
| F-03 | お酒の記録作成 | 写真・名前・評価・感想を登録 |
| F-04 | お酒の記録一覧 | 登録済みの記録をリスト表示 |
| F-05 | お酒の記録詳細 | 記録の詳細情報を表示 |
| F-06 | お酒の記録編集 | 登録済みの記録を編集 |
| F-07 | お酒の記録削除 | 登録済みの記録を削除 |
| F-08 | 検索・フィルタ | 名前・評価で記録を絞り込み |

## 4. ユーザーストーリー

### 認証
- **US-01**: ユーザーとして、メールアドレスとパスワードでログインしたい。自分だけが記録にアクセスできるようにするため。
- **US-02**: ユーザーとして、ログアウトしたい。共有デバイスでの安全性を確保するため。

### 記録管理
- **US-03**: ユーザーとして、お酒の写真を撮影またはアップロードして記録を作成したい。視覚的にお酒を振り返れるようにするため。
- **US-04**: ユーザーとして、お酒の名前・評価・感想を入力したい。体験を整理して記録するため。
- **US-05**: ユーザーとして、過去の記録を一覧で見たい。飲んだお酒を振り返るため。
- **US-06**: ユーザーとして、記録の詳細を確認したい。特定のお酒の情報をじっくり見返すため。
- **US-07**: ユーザーとして、記録を編集したい。誤りの修正や感想の追記をするため。
- **US-08**: ユーザーとして、記録を削除したい。不要な記録を整理するため。

### 検索・フィルタ
- **US-09**: ユーザーとして、お酒の名前で検索したい。特定のお酒を素早く見つけるため。
- **US-10**: ユーザーとして、評価で記録を絞り込みたい。条件に合うお酒を探すため。

## 5. 受け入れ条件

### 認証
- サインアップ画面・導線は存在しない
- ユーザーアカウントはシステム初期化時にシード等で作成する
- メールアドレスとパスワードでログインできる
- 未認証状態ではすべての機能にアクセスできない

### 記録作成
- 写真（JPEG/PNG/HEIC）をアップロードまたはカメラ撮影で添付できる
- お酒の名前（必須）、評価（1.0〜10.0、0.1刻み、必須）、感想メモ（任意）を入力できる
- 記録作成後、一覧画面に遷移する

### 記録一覧
- 記録が新しい順に表示される
- 写真のサムネイル・名前・評価が一覧上で確認できる

### 記録詳細・編集・削除
- 一覧から選択して詳細を表示できる
- 詳細画面から編集・削除ができる
- 削除時は確認ダイアログを表示する

### 検索・フィルタ
- 名前の部分一致検索ができる
- 評価でのフィルタリングができる

## 6. 機能要件

### 6.1 認証
- メールアドレス + パスワードによるログイン
- セッション管理（JWT またはセッションCookie）
- サインアップ機能は提供しない
- 初回ユーザーはシード/マイグレーションで作成

### 6.2 お酒の記録
- **記録データ項目**:
  - 写真（1枚、JPEG/PNG対応）
  - お酒の名前（テキスト、必須）
  - 評価（1.0〜10.0、0.1刻み、必須）
  - 感想メモ（テキスト、任意）
  - 記録日時（自動記録）

### 6.3 画像管理
- アップロード対応形式: JPEG, PNG, HEIC
- アップロード時にリサイズ/圧縮を行いストレージを節約
- 正方形サムネイル画像の自動生成（中央クロップ）
- サムネイルタップ時にオーバーレイで元画像を表示

### 6.4 検索・フィルタ
- お酒の名前による部分一致テキスト検索
- 評価（1.0〜10.0）によるフィルタ
- フィルタの組み合わせが可能

## 7. 非機能要件

### 7.1 プラットフォーム
- モバイルファーストのレスポンシブWebアプリケーション
- スマートフォンのブラウザでの利用を最優先
- PC ブラウザでも利用可能

### 7.2 パフォーマンス
- 一覧表示: 1秒以内
- 画像アップロード: 5MB以下の画像を5秒以内に処理

### 7.3 セキュリティ
- 認証必須（未ログインでは一切のデータにアクセス不可）
- パスワードはハッシュ化して保存
- XSS・CSRF対策を実施
- HTTPS での通信を前提

### 7.4 可用性
- 個人利用のため高可用性は不要
- 定期的なデータバックアップを推奨

### 7.5 ブラウザ対応
- iOS Safari（最新版）
- Android Chrome（最新版）
- デスクトップ Chrome / Firefox / Safari（最新版）
